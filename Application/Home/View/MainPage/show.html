<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>景点选择主界面</title>
    <!-- Bootstrap -->
    <js href="__PUBLIC__/assets/js/jquery.js"/>
    <css href="__PUBLIC__/assets/css/bootstrap.min.css"/>
    <js href="__PUBLIC__/assets/js/bootstrap.min.js"/>
    <style type="text/css">
    ul.dropdown-menu li {
        text-align: center;
    }
    </style>
</head>

<body>
    <div class="container">
        <!-- 标题栏 -->
        <div class="row">
            <div class="col-xs-6 col-xs-offset-3">
                <h1 class="text-center">景区选择</h1>
            </div>
        </div>
        </br>
        <!-- 搜索框 -->
        <div class="col-lg-12">
            <div class="input-group">
                <input id="searchInput" type="text" class="form-control" placeholder="搜索景点...">
                <span class="input-group-btn">
                    <button id="searchButton" class="btn btn-default" type="button">搜索</button>
                </span>
            </div>
        </div>
        </br>
        <!-- 下拉选框 -->
        <div class="row">
            <div class="dropdown col-xs-5 col-xs-offset-1">
                <button class="btn btn-default dropdown-toggle col-xs-12" type="button" data-toggle="dropdown" aria-expanded="true">
                    省份
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" id="dropdownMenu1" role="menu" aria-labelledby="dropdownMenu1">
                    <li role="presentation">辽宁</li>
                    <li role="presentation">河北</li>
                    <li role="presentation">山东</li>
                    <li role="presentation">山西</li>
                </ul>
            </div>
            <div class="dropdown col-xs-5">
                <button class="btn btn-default dropdown-toggle col-xs-12" type="button" data-toggle="dropdown" aria-expanded="true">
                    市区
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" id="dropdownMenu2" role="menu" aria-labelledby="dropdownMenu2">
                </ul>
            </div>
        </div>
        </br>
        <!-- 条目列表 -->
        <ul class="list-group" id="jdlist">
        </ul>
    </div>
    <script type="text/javascript">
    //省份选择下拉菜单响应动作
    $("#dropdownMenu1 li").click(function() {
        $("#dropdownMenu2").empty();
        $.getJSON("provinceToCities.php", {
            province: $(this).text()
        }, function(data) {
            $.each(data, function(i, d) {
                $("#dropdownMenu2").append("<li role=\"presentation\">" + d["city"] + "</li>");
            });
            //市区选择下拉菜单响应动作
            $("#dropdownMenu2 li").click(function() {
                console.log("dropdownMenu2 li clicked");
                $("#jdlist").empty();
                $.getJSON("cityToJingdian.php", {
                    city: $(this).text()
                }, function(data) {
                    console.log(data);
                    $.each(data, function(i, d) {
                        $("#jdlist").append("<li class=\"list-group-item\">" + d["jdItem"] + "</li>");
                    });
                });
            });
        });
    });

    //search按钮查询动作
    $("#searchButton").click(function() {
        console.log($("#searchInput").val());
        $("#jdlist").empty();
        $.getJSON("searchJingdian.php", {
            word: $("#searchInput").val()
        }, function(data) {
            console.log(data);
            $.each(data, function(i, d) {
                $("#jdlist").append("<li class=\"list-group-item\">" + d["jdItem"] + "</li>");
            });
        });
    });
    //景点条目响应动作
    $("#jdlist li").click(function() {

    });
    </script>
</body>

</html>